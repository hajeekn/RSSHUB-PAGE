
---
title: '魂系列、恶魔城和开放世界——关卡结构理论和非线性流程设计方法浅析'
categories: 
 - 游戏
 - GameRes 游资网
 - 热点推荐
headimg: 'https://di.gameres.com/attachment/forum/202203/11/101316h93dj9jjhk9z3ff9.jpg'
author: GameRes 游资网
comments: false
date: Fri, 11 Mar 2022 00:00:00 GMT
thumbnail: 'https://di.gameres.com/attachment/forum/202203/11/101316h93dj9jjhk9z3ff9.jpg'
---

<div>   
<font color="#808080">以下文章来源于腾讯游戏学堂 ，作者Will</font><br>
<br>
<strong><font color="#de5650">导语</font></strong><br>
<br>
本文引用关卡结构拓扑理论，使用数学方法对关卡结构的设计做出评价和指导，并通过不同游戏的案例分析阐述了理论的可行性、应用场景和局限性。在此基础上，将研究范围从静态结构延伸到动态流程的设计中，提出了一种指导和辅助流程设计的方法思路。<br>
<br>
<strong><font color="#de5650">一、引言及背景</font></strong><br>
<br>
众所周知嗷，《艾尔登法环》（以下简称《环》）已于2月25日正式发售。作为一部在2016年《黑暗之魂3》发布后便吊足了系列粉丝胃口的“正统续作”，凭借着《黑暗之魂》系列等作品积累起的良好口碑以及“开放世界”概念的加持，《环》自正式公布消息以来便受到了类型爱好者的广泛关注，更是在开放预购后连续登上steam热销榜首。<br>
<br>
相信玩过魂系列（《恶魔之魂》、《黑暗之魂》系列，《血源诅咒》、《只狼》）及其他类魂作品的玩家能够深切感受到，有别于《美国末日》等线性流程的作品，魂类游戏往往缺乏相对明确的目标指引（地图的目标点、HUD的行动指示等），关卡和流程设计也绝非线性，因此初玩时面对凶险的战斗和复杂的关卡（以及不死人僵硬的动作）容易觉得无所适从甚至因此弃游；而一旦克服初见的恐惧和不适心理，耐心深入游玩下来，又往往被其精巧的关卡设计和晦涩的叙事风格所吸引，成为系列的爱好者，对其中的各类细节津津乐道，忍不住向周围的朋友安利，将其奉为心目中的“高势能产品”。<br>
<br>
这类以地图探索为主要流程体验的游戏，细细品来与古早的《恶魔城》系列有异曲同工之妙，因此又有人把“类魂”游戏称为“3D银河恶魔城”游戏[1]。而从另一侧来说，近年来，随着“魂系列”影响力的扩大，许多优秀的类银河恶魔城作品，也被玩家打上了“类魂系列”的标签。这充分说明，魂系列与恶魔城这两类游戏即便视角完全不同，在流程体验上也是具有一定共性的。<br>
<br>
<div align="center">
<img aid="1033262" zoomfile="https://di.gameres.com/attachment/forum/202203/11/101316h93dj9jjhk9z3ff9.jpg" data-original="https://di.gameres.com/attachment/forum/202203/11/101316h93dj9jjhk9z3ff9.jpg" width="600" id="aimg_1033262" inpost="1" src="https://di.gameres.com/attachment/forum/202203/11/101316h93dj9jjhk9z3ff9.jpg" referrerpolicy="no-referrer">
</div><br>
Steam平台“类魂系列”标签最受欢迎游戏top10，可以看到其中的《空洞骑士》、《盐和避难所》、《终焉的莉莉丝》都是以地图探索为主要内容的类银河恶魔城游戏。说明这两个品类的游戏在玩家心目中的印象是具有一定共性的。<br>
<br>
而“开放世界游戏”的概念，自2017年《塞尔达传说：荒野之息》（以下简称《荒野之息》）发售并取得现象级成功以来，便一直被反复提及。尽管大家对这个概念的定义边界一直存在争议，但毫无疑问的是，能够被称作“开放世界”的游戏往往具有无缝开放的大世界地图、高度自由打破边界的场景交互手段，传统意义上会认为这与恶魔城和魂系列代表的精巧的箱庭式关卡设计是截然不同甚至相互冲突的设计思路。这也是《环》在公布后引起一部分玩家关注甚至担忧的原因：扣上了“开放世界”这个帽子，魂类游戏还能有“魂味”吗？<br>
<br>
作为一名魂系列类型游戏的爱好者（老ass）以及游戏行业从业者，笔者想借着这次机会，结合自己的游玩体验，把在过往游戏经历中积累的一些思考与大家分享，力求从流程结构和体验上，寻找两类游戏（魂/恶魔城 vs 开放世界）的共性，并尝试反推其背后的设计思路和方法。<br>
<br>
需要明确的是，本文只是以魂系列/恶魔城游戏为例，尝试归纳总结其风格化体验背后的关卡和流程设计的科学原理，将其归纳为“一种对应特定品类和体验”的设计方法，并无意表达“魂的、非线性的”体验流程就一定优于“不魂的、线性的”体验流程这样的暴论。游戏作为一种综合产品，其品质与体验受到系统、战斗、玩法、美术、叙事等多个维度的影响，关卡与流程设计只是玩法其中的一个维度，而“魂”或者“不魂”更只是关卡与流程设计中的不同思路方向：线性流程的游戏一样能够做得非常出色，同样的，非线性流程的游戏也不乏粪作。希望读者大大们能够理性看待，避免先入为主、踩一捧一的观念。<br>
<br>
由于笔者大多基于自己游玩时产生的个人体验进行分析，过程中难免产生疏漏或与读者体验相悖的部分；同时，笔者大学阶段并未在正统的游戏专业就读，因此一些术语表述与方法论也难免有“民科”（民策？民间策划？）之嫌；此外，本文落笔于《环》即将发售之际，相信以笔者的写作速度，成文已在发售后，届时可能会有一些结论在《环》中得到验证，也会有一些愚见被证伪。综上，在此欢迎同好们多多私戳或评论交流，不吝赐教；如有贻笑之处，还望海涵。<br>
<br>
特别声明：本文包含所述游戏流程与内容剧透，在意者可酌情跳过分析过程，直接看结论部分。<br>
<br>
<strong><font color="#de5650">二、体验层次划分</font></strong><br>
<br>
回到背景中提出的问题，“魂味”是什么？“开放世界”与魂在流程上的体验共性和设计方法又是什么？要回答这两个问题，笔者首先对此类游戏给玩家带来的体验做一个层次上的划分。<br>
<br>
尽管作为一种主观感受，游戏的“体验”对每个玩家个体来说都是千差万别的，但对于魂系列/恶魔城这类以地图探索作为游玩内容的游戏，归纳而言可以大致将其体验从“微观”到“宏观”划分为三个层次：<br>
<br>
第一层往往聚焦于短时间内的切片体验，通常是战斗、射击、解谜、跑酷、采集等游戏典型的玩法元素的集中呈现，持续时间往往从几秒钟到几分钟不等（部分可能会更久），可以是一组小怪、一个boss的战斗，开启一个宝箱或是找到一扇隐藏门及其相互组合起来的游玩流程；用《只狼》来举例的话，例如“登上苇名城的屋顶，被大群寄鹰众疯狂围殴”的体验；或者用概念来描述，一个开放区域（Open Area）内部的体验；<br>
<br>
第二层则是多个开放区域按照一定的规则相互联系构成的结构带来的体验，或者用大家熟悉的概念来说，“关卡”级别的体验。在典型的类魂系列游戏中，一个关卡往往包含一个或多个存档点（篝火、鬼佛、神社、祭坛...）以及多个不同类型的POI，关卡内部往往在空间结构或视觉印象上相互连贯，且有着统一的美术包装。关卡级别体验的持续时间往往从十几分钟到数小时不等，或者可以看作是玩家“一次游玩”的时间尺度范围；<br>
<br>
第三层则是游戏整体周目流程给玩家带来的体验，既包括了不同关卡之间的结构联系，也包含了游戏整体的叙事结构和目标设计，视游戏体量大小（和相对难度），周目级别的体验往往持续数十个小时，通常会分散到玩家“多次游玩”的时间区间中去。<br>
<br>
那么，“魂味”究竟是如何渗透到每个体验层次的呢？<br>
<br>
从第一层体验的角度来看，“魂味”往往体现在一些系统和战斗的设计上，这些设计又是相互耦合、相辅相成的，共同构成了所谓的“魂味”感受。<br>
<br>
举个简单的例子：战斗系统的精力、硬直和韧性设计，导致玩家同时面对多个敌人的作战极为困难，而作战类的开放区域往往远近前后安排了不同类型的小怪，需要玩家在游戏给定的数值养成系统内对有限的资源使用做出策略上的选择；数值收集和成长结合“死亡掉魂跑尸”的设计，又能够复用相同的关卡内容创造出截然不同的心流体验....如此种种不一而足。许多游戏也因为这些机制的存在，而被玩家们打上“类魂”的标签。<br>
<br>
老玩家看到这里想必能够会心一笑，新玩家也不必担心一头雾水，如果时间和精力允许，笔者会专门再用一篇杂谈详细介绍魂系列游戏的各类系统设计，以及他们之间是如何相互耦合来共同营造出一种风格化的游戏体验的，本文就不展开叙述了。<br>
<br>
从第二层的角度来分析的话，尼莫大神在[1]如何设计一张有“魂味”的地图？——论“类魂”游戏关卡的拓扑结构 - 知乎 (zhihu.com)这篇文章已经用相对科学的方法讲得比较透彻了，这里引用一下结论：<br>
<br>
所谓“魂味”，在关卡逻辑方面，意指地图中存在优秀的、丰富的、多层次的环路结构。<br>
<br>
——这三个形容词一个都不能少，环结构的链不能太冗余，否则就不够“优秀”，稳定度差。数目太少也不行，但是只堆数目也不行。环结构大的层次(高阶 Cheeger数)，表现为首尾至少要相连，极大环才不会出现驻点。要有很多细致的层次(高阶 Cheeger数也要高)这样才叫一个有“魂味”的关卡。<br>
<br>
如何定量描述“魂味”？——我们可以通过计算关卡的稳定因子，来定量化的描述“魂味”的多与少，乃至与其他地图的“魂味”浓度做比较。<br>
<br>
简而言之，引文通过观察5款被广泛认可的类魂游戏，定义了一套评价关卡拓扑结构的数学模型，抽象出了“魂味”的评价因子，并经过了相对可靠的验证。本文也将对这个理论进行综述，并选择两款广受好评的游戏作为案例，从几个方面进行拓展，在综述的基础上，进行进一步的解释和分析。<br>
<br>
事实上，笔者正是受了此文的启发，惊叹于游戏设计这一看似经验主义的工作能用如此精确的数学语言进行描述，才有了进一步探索研究的动机，也才有此拙文。在此对引文作者尼莫大神深表敬意与感谢。<br>
<br>
第三层，也就是整个游戏的流程角度，笔者将基于关卡拓扑结构理论的成果，将分析范围从静态的结构延伸到动态的流程中，探讨这种风格化的体验究竟是如何通过对关卡顺序的组织和流程的设计实现的；同时，尝试将理论延伸到开放世界品类中，以《荒野之息》为例，探讨开放世界游戏是否也能使用类似的方法来对玩家的目标和流程进行引导和控制。<br>
<br>
<strong><font color="#de5650">三、关卡拓扑结构理论综述及应用研究</font></strong><br>
<br>
<strong>3.1 关卡拓扑结构理论综述</strong><br>
<br>
<font color="#de5650">3.1.1 基本概念定义</font><br>
<br>
为了使用相对严谨的数学工具对“关卡体验”这一看似主观的感受进行定量分析，同时指导“关卡设计”这一看似经验主义的工作，我们首先需要建立一套从现实世界到理论空间的映射规则，对此类游戏的关卡中常见的设计，进行概念与表现形式的定义。<br>
<br>
以下定义大部分来源于 [1]，表述上稍有出入，感兴趣的朋友可以移步比对阅读。<br>
<br>
1 兴趣点（POI，Point of Interest）<br>
<br>
游戏当中可以吸引玩家兴趣、引导游戏流程、维持心流体验的可交互元素。主要表现为：篝火(存档点)、可捡拾的宝物、敌人、宝箱、可交互NPC、掉落的素材/增益道具，或者特殊的灯光、建筑、奇观等等。<br>
<br>
——用开放世界游戏来举例的话，《荒野之息》的塔、神庙、山巅，一切能引起玩家注意和好奇的物体，都可以看作是POI。<br>
<br>
2 开放区域（Open Area）<br>
<br>
在关卡中，由一簇POI所框定的一块可探索区域，一般具有明晰的独立于其他开放区域的地标、独立的敌人AI适用区域(NavMesh)、美术风格或素材等。在我们的绘图中，普通的开放区域用绿色标出。<br>
<br>
——原文中，“开放区域”有着严格的定义和几何构造方法，但我们无需在此纠结，只需要带着这个印象：开放区域包含了一个或一组POI，内部是自由连通的，且相互之间依靠不含POI的路径相连接。<br>
<br>
<div align="center">
<img aid="1033263" zoomfile="https://di.gameres.com/attachment/forum/202203/11/101316l8b6cy0yz6lb67b1.jpg" data-original="https://di.gameres.com/attachment/forum/202203/11/101316l8b6cy0yz6lb67b1.jpg" width="600" id="aimg_1033263" inpost="1" src="https://di.gameres.com/attachment/forum/202203/11/101316l8b6cy0yz6lb67b1.jpg" referrerpolicy="no-referrer">
</div><br>
3 路径（Path）<br>
<br>
用于连接各个开放区域的线型结构，一般不含有POI。<br>
<br>
——像是《荒野之息》中路边随处可见的蘑菇、苹果等可收集物，很遗憾便不能算作“POI”的范畴了；当然像是“一大片苹果林”这种，或是在“我正好急需几朵速速蘑菇来做任务”的情况下，则又另当别论了。究其根本，POI的定义核心仍然是玩家自身的“Interest”，因此尤其是在开放世界游戏中，POI的定义边界会随着玩家的心境和目的的改变随时变化。<br>
<br>
<div align="center">
<img aid="1033264" zoomfile="https://di.gameres.com/attachment/forum/202203/11/101317tznatoovva4a8oiz.jpg" data-original="https://di.gameres.com/attachment/forum/202203/11/101317tznatoovva4a8oiz.jpg" width="600" id="aimg_1033264" inpost="1" src="https://di.gameres.com/attachment/forum/202203/11/101317tznatoovva4a8oiz.jpg" referrerpolicy="no-referrer">
</div><br>
4 存档点<br>
<br>
一种特殊的POI，玩家可以在此处进行休整、升级、传送、回复、备战等操作。通常而言整备操作会导致地图的刷新与怪物的重置。举例而言，魂系列的篝火、仁王的神社、血源的提灯、只狼的鬼佛等。由于存档点在关卡中的重要地位，在分析中会被单独划分为一个开放区域。<br>
<br>
——出于机制、美术、叙事等方面的考量，不同游戏会有一些特殊设计，例如《黑暗之魂》、《空洞骑士》、《盐和避难所》都采用了大小存档点的设计，小存档点（小篝火、不带车站的椅子、小祭坛）往往只具有休整回复的功能，而无法进行传送等操作。这类“小篝火”的设计实际上是对关卡结构的一种补偿。<br>
<br>
5 初始点<br>
<br>
玩家第一次进入关卡所处的位置，通常标记关卡的开始，单独划分为一个开放区域。<br>
<br>
6 Boss点<br>
<br>
通常为该关卡区域最强力的敌人，到达并通过Boss点意味着关卡的结束和进入下一个关卡，单独划分为一个开放区域。<br>
<br>
——在广义的魂系列/恶魔城游戏中，Boss战因其玩法上的特殊地位，往往还被视为关卡探索的“奖励”，不仅仅由于击败Boss能够获取大量资源或是解锁新的探索内容，还因为设计优秀的Boss战本身就宛如艺术品一般令人爱不释手：在紧张的气氛和华丽的演出中反复挑战、学习成长，成就感和挫败感不断累积、相互侵轧带来的心流体验在击败Boss的一刻达到峰值。这一点想必喜爱《只狼》的玩家们一定深有体会。<br>
<br>
——回到概念定义上来，开放世界中，初始点和Boss点的功能定位有所不同，一般不存在“初始点”，而“世界Boss点”通常作为一个POI或是开放区域存在，且不会标记关卡的结束。<br>
<br>
7 全连通路径（Undirected Path）<br>
<br>
代表两个点之间是完全连通的关系，可以无条件相互前往。<br>
<br>
8 单向路（Directed Path）<br>
<br>
用单向箭头A ----> B来表示，代表从A点可以进入B点，但B点无法原路直接返回A点而不经过其他开放区域，包括物理意义上的单向路（悬崖、滑坡）或是剧情意义上的单向传送（血源被布袋哥带到亚哈古尔、魂3灭薪王之后传送舞娘等）<br>
<br>
<div align="center">
<img aid="1033265" zoomfile="https://di.gameres.com/attachment/forum/202203/11/101317tjf3hh68pa7htnjf.jpg" data-original="https://di.gameres.com/attachment/forum/202203/11/101317tjf3hh68pa7htnjf.jpg" width="600" id="aimg_1033265" inpost="1" src="https://di.gameres.com/attachment/forum/202203/11/101317tjf3hh68pa7htnjf.jpg" referrerpolicy="no-referrer">
</div><br>
9 单向门（Short Cut)<br>
<br>
或是常说的“捷径”，用A -->-- B或是粗箭头来表示，代表玩家首次从其他路径到达B点时，无法从B点进入A点，但当玩家首次从其他路径到达A点时，可以建立起A、B之间的全连通路径，使两点之间永远变成全连通状态。主要表现形式有：“这一侧打不开”的门，“机关不会动”的电梯、可以放下的梯子、需要踢倒变成桥的大树等等。<br>
<br>
<div align="center">
<img aid="1033266" zoomfile="https://di.gameres.com/attachment/forum/202203/11/101317ndvoqyq0xvavlsza.jpg" data-original="https://di.gameres.com/attachment/forum/202203/11/101317ndvoqyq0xvavlsza.jpg" width="600" id="aimg_1033266" inpost="1" src="https://di.gameres.com/attachment/forum/202203/11/101317ndvoqyq0xvavlsza.jpg" referrerpolicy="no-referrer">
</div><br>
10 机关门（Mechanism）<br>
<br>
用带端点的单向箭头 A *--> B表示，表示玩家第一次到达A点时无法经由该路径到达B点，需要满足一定条件后（收集到特定物品、满足一定要求等）才能打开此路径使AB变为全连通状态。B点可以是单独的一个带锁宝箱、一间密室，也可以是一整块区域甚至后续所有的游戏流程的唯一起点。最常见的即为物理意义上的“带锁的门与钥匙”，其他意义上例如“需要13颗心心才能拔出大师剑”或是“需要佩戴深渊戒指才能进入深渊”、“需要收集到诡异人偶才能进入绘画世界”也属于此范畴。<br>
<br>
——不同于单向路和单向门主要服务于关卡体验，机关门是控制周目流程和游玩体验的核心工具，这也是本文将会重点分析的内容。后续讨论为了表述方便，也会称机关门为“锁”，称“打开机关门的条件”为“钥匙”。<br>
<br>
——单向门与机关门的核心区别在于：玩家一定是先见到单向门的“打不开的一侧”，然后才到达门的“打得开的一侧”来“把门打开”；换言之，假设笔者位于门的外侧，如果玩家能在此门打开之前从其他路径接触到这个门的另一侧，则这个门属于单向门，反之则属于机关门。<br>
<br>
<div align="center">
<img aid="1033267" zoomfile="https://di.gameres.com/attachment/forum/202203/11/101317j9tdzw0ittos7wl7.jpg" data-original="https://di.gameres.com/attachment/forum/202203/11/101317j9tdzw0ittos7wl7.jpg" width="600" id="aimg_1033267" inpost="1" src="https://di.gameres.com/attachment/forum/202203/11/101317j9tdzw0ittos7wl7.jpg" referrerpolicy="no-referrer">
</div><br>
为了方便后文的表述，开放区域作为游戏内容的主要独立载体，抽象到关卡结构逻辑图上被称为“点”或“顶”，其中初始点、存档点/传送点、Boss点因其在流程中的特殊地位，被称为“不动点”，也就是“因为特殊所以在简化关卡逻辑结构表示的时候最好不要随便动的点”；四种路径连通形式，抽象到逻辑图上又可以被称为“键”，同理单向路、单向门、机关门又被称为“不动键”。<br>
<br>
<font color="#de5650">3.1.2 理论内容综述</font><br>
<br>
在明确了概念定义、表现形式和映射关系的基础上，尼莫大神在引文中选择图论这一数学工具，对关卡结构进行分析，总结了一套基于关卡拓扑结构的设计理论，本文在这里对其具体内容进行简要综述。（略去了所有复杂的数学理论推导过程，感兴趣的读者可以直奔原文细细研读）：<br>
<br>
1 自然逻辑图<br>
<br>
用点来表示不同的开放区域，用四种类型的键将开放区域按照关卡内的自然关系连接起来形成的结构图；通常能够直观表示关卡的自然逻辑结构<br>
<br>
2 最简逻辑图<br>
<br>
依照最简缩并既约规则，在同伦变换唯一性的理论基础下，对自然逻辑图的一些点键进行缩并得到的最简图；同一关卡的最简逻辑图有且只有一个<br>
<br>
——从自然逻辑图构建最简逻辑图的方法可以大致概括为：“将非不动键连接的两个非不动点、或一个不动点与一个非不动点缩并成一个点；不动点之间不可缩并；不可形成二顶环”。最简逻辑图能够清晰表示出关卡内部路径的成环逻辑和依赖关系，省去了非成环键对图结构的干扰，对“缩并规则”和“唯一性”感到困惑的朋友可以参考原文的详细定义和操作步骤。<br>
<br>
3 最小生成树<br>
<br>
在逻辑图的基础上，隐去成环键，将全连通环缩并为一点，可以得到关卡结构图的最小生成树。选择成环键的优先级简单来说可以概括为单向门>单向路>机关门。<br>
<br>
——理想情况下，最小生成树能够直观展示关卡的流程：其中最长的“树干”是关卡的主线流程，“树枝”则是支线流程。最小生成树不含任何环，且向其中添加任意键都会导致环的产生。<br>
<br>
<div align="center">
<img aid="1033268" zoomfile="https://di.gameres.com/attachment/forum/202203/11/101318fig85z2orikk6rer.jpg" data-original="https://di.gameres.com/attachment/forum/202203/11/101318fig85z2orikk6rer.jpg" width="600" id="aimg_1033268" inpost="1" src="https://di.gameres.com/attachment/forum/202203/11/101318fig85z2orikk6rer.jpg" referrerpolicy="no-referrer">
</div><br>
——原本不愿在本文多谈系统层面的设计，但为了防止不熟悉魂系列的朋友带着疑问阅读，这里单独解释一下为何“单向门”的地位如此之高：<br>
<br>
在本格魂系列游戏中，玩家在探索过程中击败敌人的时候会获得并累积一种名为“魂”的核心资源，无论是自身数值成长还是购买任何道具都需要消耗魂作为硬通货，简而言之是游戏中的唯一货币；<br>
<br>
魂只有到达存档点才能被使用掉，探索过程中不存在使用魂的途径；<br>
<br>
一旦玩家死亡，玩家携带的所有魂就会掉落在死亡处附近，形成一个印记（《血源》是附着在附近的怪物身上，同理），玩家会在最近的存档点（篝火）处复活，并且需要回到死亡处拾取印记（血源则是消灭对应怪物特定百分比血量），才能将掉落的魂重新获得，也就是所谓的“捡魂”；<br>
<br>
一旦掉落的魂尚未被拾回而玩家再次死亡，玩家的死亡印记将被覆盖刷新，上次死亡遗失的所有魂将永久失去，也就是俗称的“丢魂”；<br>
<br>
基于其战斗系统和场景设计的特点，玩家在探索地图及跑图捡魂的过程中，都需要保持高度警惕，否则死亡是家常便饭的事情（“死亡是游戏的一部分”）；<br>
<br>
单向门通常是抵达存档点的反向捷径，能够打开的单向门意味着经过了漫长艰苦的探索过程后，已经离存档点不远了。<br>
<br>
综上，相信即便没玩过魂系列的读者，也能够想象魂系列玩家经过了漫长艰苦的地图探索、怀揣一笔巨款时，发现并打开单向门的心流体验。<br>
<br>
此外，此类游戏的Boss往往在设计之初便是“需要玩家反复挑战才能攻破”的设定，因此在尽可能保证关卡结构简洁的前提下，单向门成为了探索流程结束、从存档点迅速抵达Boss处反复挑战的快速通道，避免玩家在多次挑战Boss时反复穿越已经完成的探索部分。<br>
<br>
多说一句：“捡魂”这一设计的缺失，是笔者认为《只狼》在系统层面不具有“魂味”的核心原因；而“Boss人手门口杵一尊鬼佛”这样的设计则代表其基本放弃了地图探索这一体验而是专注于战斗玩法。<br>
<br>
4 连通度<br>
<br>
对于一张图，如果任意去掉k-1个点，剩下的子图仍然是连通图，且存在至少一种取法，在去掉k个点之后，剩下的子图是非连通图，则称该图的连通度为k<br>
<br>
——“连通”是图的一种性质，意味着从图上的任意一点出发，能够沿着路径到达图上的任意另一点。拿掉就能够破坏图连通性的k个点称作图的k阶“驻点（对）”。<br>
<br>
<div align="center">
<img aid="1033269" zoomfile="https://di.gameres.com/attachment/forum/202203/11/101318d8mbbmj5g848lm34.jpg" data-original="https://di.gameres.com/attachment/forum/202203/11/101318d8mbbmj5g848lm34.jpg" width="600" id="aimg_1033269" inpost="1" src="https://di.gameres.com/attachment/forum/202203/11/101318d8mbbmj5g848lm34.jpg" referrerpolicy="no-referrer">
</div><br>
5 Cheeger数<br>
<br>
对于一张m点的图，若存在n种取法，使得删掉其中k个点之后的子图是非连通图，则称该图的k阶Cheeger数为1-n/Comb(m,k)；<br>
<br>
——概括而言，k阶Cheeger数指的是在所有拿掉k个点的取法中，仍然保持图连通的取法的占比，反映了这张图在拿掉k个点的情况下仍然保持连通的能力。<br>
<br>
6 稳定因子（魂味值）<br>
<br>
无穷阶Cheeger数的泰勒级数和。鉴于高阶Cheeger数收敛得非常快，通常只取其三阶微扰来评价关卡结构，即定义一个关卡的最简逻辑图G，其1、2、3阶Cheeger数分别为a、b、c，则该关卡的稳定因子为 3/5*(a+1/2*b+1/6*c)。<br>
<br>
——后文均用“稳定因子”这一称呼指代“真正的稳定因子的三阶微扰”。稳定因子能够表示关卡“总体而言环路结构的稳定性和层次性”。不了解什么是泰勒级数和微扰的朋友只需要记住结论和上面的计算公式即可。<br>
<br>
7 稳定因子普适类（魂味区间）<br>
<br>
对于一个关卡而言，大于0.94意味着高稳定因子（魂味最正）、0.94到0.91之间意味着中稳定因子（魂味尚可）、小于0.91意味着低稳定因子（魂味不照）<br>
<br>
这套理论不仅适用于关卡维度的分析，也可以用来分析第三层也就是整个游戏周目流程的结构。例如《黑暗之魂重制版》全流程的稳定因子为0.9806，关卡塞恩古城为0.9636；《血源诅咒》全流程0.9086，关卡亚楠0.9794；《黑暗之魂3》全流程0.9050，关卡绘画世界（DLC1）0.9733，关卡大书库0.9691。不难看出，塞恩古城、绘画世界、大书库这样给人留下深刻印象的关卡，其稳定因子相当之高；但也能看出来，想要在游戏全流程保持“魂味”的环路结构是非常困难的，即便是血源和魂3这样的“魂本家”作品，在拥有多个高稳定因子关卡的同时，其全流程的稳定因子与魂1相比还是远远不及。（魂1什么历史地位不用多说了）（具体数据指标绝对值由于引文未公开计算过程，与笔者实际计算结果部分不一致导致存疑，实例详见后文，但指标之间的相对关系还是有参考意义的）<br>
<br>
注意：此处抛开所有其他元素，仅仅评价关卡逻辑结构这一个维度的“魂味”，事实上“魂味”作为一种整体的体验和感受，还会受到战斗、美术、叙事等多个维度元素的影响，绝不能用单一的指标去完全概括。一个明显的反例是，一代的病村、亚诺尔隆德这样稳定因子相对偏低的地图，依然能够在玩家心目中留下深刻的印象甚至收获较高的评价。这是由于这些地图并非主要承载探索玩法的内容，而更多地为叙事、美术表达和氛围营造来服务。因此，希望读者把上述理论只是当作一种辅助看待关卡设计的工具，而绝非评价任何关卡或游戏的唯一标尺。（为我心爱的魂3挽一挽尊）<br>
<br>
下面，笔者将选择《空洞骑士》和《只狼》两款游戏，对其关卡拓扑结构进行分析，并结合实际游戏体验，对该理论的有效性、应用范围与局限性做出具体阐述。其中《空洞骑士》作为一款典型的恶魔城游戏，非常适合用来验证该理论在评价恶魔城/魂系列关卡设计的有效性；而《只狼》作为一款受到争议的、在笔者心目中不具备“魂系列”关卡结构特点的FromSoftware游戏，则被用来说明该理论在“非魂系列关卡”设计领域的应用价值及其评价指标存在的局限性。<br>
<br>
为什么不选魂本家或是《帕斯卡契约》、《仁王》这样的游戏呢？原因很简单，引文已经全部做完了，感兴趣的朋友可以移步查看。至于魂2，我没打完。<br>
<br>
<strong>3.2 理论应用——以《空洞骑士》为例</strong><br>
<br>
《空洞骑士》是一款笔者非常喜欢的，由来自澳洲的独立工作室Team Cherry开发的银河恶魔城风格的游戏，其战斗、关卡、叙事和美术设计都非常优秀，受到了类型爱好者的一致好评，在Steam“类魂系列”标签分类下的受欢迎程度甚至超越了《黑暗之魂》的本家正作。（双品类好评之王的含金量懂不懂啊）<br>
<br>
<div align="center">
<img aid="1033270" zoomfile="https://di.gameres.com/attachment/forum/202203/11/101318u9614gx1bor18zob.jpg" data-original="https://di.gameres.com/attachment/forum/202203/11/101318u9614gx1bor18zob.jpg" width="600" id="aimg_1033270" inpost="1" src="https://di.gameres.com/attachment/forum/202203/11/101318u9614gx1bor18zob.jpg" referrerpolicy="no-referrer">
</div><br>
同时，这款游戏也是笔者认为，当下少有的在关卡设计层面走到极致的作品。对比同时期其他同类作品（《盐和避难所》、《Ori》、《暗影火炬城》、《渎神》、《终焉的莉莉丝》）不约而同地把美术风格作为恶魔城品类的突破口，笔者认为从关卡出发的设计更加难能可贵、值得策划学习。<br>
<br>
<font color="#de5650">3.2.1 游戏内容到理论空间的映射</font><br>
<br>
为了使用关卡拓扑结构理论对其关卡设计进行分析，笔者首先阐明结构图上的“点”和“键”对应到游戏的映射规则：<br>
<br>
1 开放区域<br>
<br>
由于游戏在机制设置上，把地图分割为了一小块一小块的“房间”，房间之间拥有黑屏的场景切换态，怪物无法通过，因此每个房间天然形成了关卡结构中的开放区域。<br>
<br>
椅子（篝火）、车站（传送点）以及关卡Boss默认划分为开放区域。<br>
<br>
重要的可收集道具（如生命碎片、灵魂Boss等）在自然逻辑图上也划分为开放区域；除此之外，还有一种开放区域的构建规则：当房间内存在玩家目前能力限制无法进入的区域（机关门）时，机关门后的空间被单独划分为一个开放区域。我们不妨暂且记下此处约定，在下一章中将作为重点分析。<br>
<br>
为了便于观察，我们将关卡的初始点（流程上第一次进入关卡的地点）用蓝色表示、将关卡Boss用红色表示、将流程驻点（休整、回复、传送、存档）用紫色表示、将可收集道具用黑色表示、将玩家获得的能力（机关门的钥匙）用白色表示、将连接到其他关卡的部分（脱离点）用橙色表示。<br>
<br>
2 单向路<br>
<br>
大多表现为跳下后使用任何能力都无法原路返回的悬崖，字面意义。在逻辑图上用单向箭头表示。<br>
<br>
3 单向门<br>
<br>
可以反向开通的捷径，在游戏中由于叙事和美术包装，主要有两种形式：可以从背面摧毁支柱的墙（自然环境）以及可以从背面打开的机关门（虫造环境）。为了便于绘图，在逻辑图上用粗箭头表示。<br>
<br>
4 机关门<br>
<br>
必须满足一定条件才能开启的门，在游戏中有非常丰富的表现形式，大多数情况下，挂钩主角在探索过程中获得的各种能力，例如必须学会灵魂冲击（波）才能消灭的堵门怪。在逻辑图上用带端点的箭头表示，并且尽可能在旁边注明需求的能力。<br>
<br>
<div align="center">
<img aid="1033271" zoomfile="https://di.gameres.com/attachment/forum/202203/11/101318qlmhm969mjth9h0i.jpg" data-original="https://di.gameres.com/attachment/forum/202203/11/101318qlmhm969mjth9h0i.jpg" width="600" id="aimg_1033271" inpost="1" src="https://di.gameres.com/attachment/forum/202203/11/101318qlmhm969mjth9h0i.jpg" referrerpolicy="no-referrer">
</div><br>
对于这种“能力锁”类型的机关门，我们不妨约定：只有当“拥有此项能力”不是玩家到达该门前的必要条件时，才将其作为不动键标注在自然逻辑图上，否则按全连通处理（对应“开放区域”划分原则的第三条）。相信这不难理解：我如果没有二段跳，遇到一个二段跳才能上去的高台，这对我来说是一个机关门；我如果能到达这个高台下就一定是拥有二段跳的，那这里对我来说就是全连通的，二段跳后面的区域也就可以视情况与前一个开放区域缩并了。<br>
<br>
<font color="#de5650">3.2.2 什么是魂味——关卡拓扑结构分析及指标计算</font><br>
<br>
应用上述原则，对游戏的第一个正式关卡“遗忘十字路”进行自然逻辑图的绘制如下所示：<br>
<br>
<div align="center">
<img aid="1033272" zoomfile="https://di.gameres.com/attachment/forum/202203/11/101319k7c77c74lr7ejr9f.jpg" data-original="https://di.gameres.com/attachment/forum/202203/11/101319k7c77c74lr7ejr9f.jpg" width="600" id="aimg_1033272" inpost="1" src="https://di.gameres.com/attachment/forum/202203/11/101319k7c77c74lr7ejr9f.jpg" referrerpolicy="no-referrer">
</div><br>
请出这张陪伴了所有空洞玩家的全收集地图（局部）做一下对照：<br>
<br>
<div align="center">
<img aid="1033273" zoomfile="https://di.gameres.com/attachment/forum/202203/11/101319zs6h4s466586u2vr.jpg" data-original="https://di.gameres.com/attachment/forum/202203/11/101319zs6h4s466586u2vr.jpg" width="600" id="aimg_1033273" inpost="1" src="https://di.gameres.com/attachment/forum/202203/11/101319zs6h4s466586u2vr.jpg" referrerpolicy="no-referrer">
</div><br>
好嘛，大概能对得上。有一些可收集道具在地图上标注了出来，但因为是初次到达就能立刻获得的，或是缩并成所属开放区域的单顶环的附件了，也就不满足机关门的条件，没出现在逻辑图上。<br>
<br>
这张逻辑图也回答了笔者一个问题，那就是为什么当笔者安利一位玩魂3的朋友去玩空洞骑士时，他会在叫好的同时，因为迷路而大感困难。不妨拿魂3的第一个正式关卡“洛斯里克高墙”的自然逻辑图 [1] 对比一下：<br>
<br>
<div align="center">
<img aid="1033274" zoomfile="https://di.gameres.com/attachment/forum/202203/11/101319gxwzi5mq0n5mqwzw.jpg" data-original="https://di.gameres.com/attachment/forum/202203/11/101319gxwzi5mq0n5mqwzw.jpg" width="600" id="aimg_1033274" inpost="1" src="https://di.gameres.com/attachment/forum/202203/11/101319gxwzi5mq0n5mqwzw.jpg" referrerpolicy="no-referrer">
</div><br>
不难看出，十字路不仅开放区域的数量远远多于高墙，多度顶点和不动键的个数也更多：在相似的场景下经过更多的的房间，面临着更频繁的岔路口和捷径，还有非常多“前面的区域以后再来探索吧？”的机关门/能力锁（如下图必须要获得水晶冲刺才能进入的通道），也难怪笔者那位朋友会迷路了。<br>
<br>
<div align="center">
<img aid="1033275" zoomfile="https://di.gameres.com/attachment/forum/202203/11/101319y4uk3innti4ti4wd.jpg" data-original="https://di.gameres.com/attachment/forum/202203/11/101319y4uk3innti4ti4wd.jpg" width="600" id="aimg_1033275" inpost="1" src="https://di.gameres.com/attachment/forum/202203/11/101319y4uk3innti4ti4wd.jpg" referrerpolicy="no-referrer">
</div><br>
再对比一下两张地图的最简逻辑图。<br>
<br>
在对自然逻辑图的点键进行缩并时，我们不妨在最简缩并既约原则上增加这样一条：如果机关门的钥匙能够在本关卡流程内获得（不要求首次到达时，但要求在本关卡流程内，如此要求的依据见下一章分析），则将其按照全连通键处理，同时将这把钥匙标注为不动点；反之则仍然是不动键。同时，对于“打开德特茅斯的车站门”这样形式上创造捷径、逻辑上等同于传送点的单向门，我们也将其缩并到同一个点，便于分析。<br>
<br>
在略去和其他地区的通路口（橙色开放区域）之后易得十字路的最简逻辑图如下：<br>
<br>
<div align="center">
<img aid="1033276" zoomfile="https://di.gameres.com/attachment/forum/202203/11/101320cp5ug3z73j367311.jpg" data-original="https://di.gameres.com/attachment/forum/202203/11/101320cp5ug3z73j367311.jpg" width="600" id="aimg_1033276" inpost="1" src="https://di.gameres.com/attachment/forum/202203/11/101320cp5ug3z73j367311.jpg" referrerpolicy="no-referrer">
</div><br>
观察十字路的最简逻辑图，可以找到4个极小环结构，相应的，假如我们隐去成环键也就是单向门（捷径），可以得到关卡的最小生成树，也就是对应到玩家的游玩流程：<br>
<br>
<div align="center">
<img aid="1033277" zoomfile="https://di.gameres.com/attachment/forum/202203/11/101320a9fra9krj5at992h.jpg" data-original="https://di.gameres.com/attachment/forum/202203/11/101320a9fra9krj5at992h.jpg" width="600" id="aimg_1033277" inpost="1" src="https://di.gameres.com/attachment/forum/202203/11/101320a9fra9krj5at992h.jpg" referrerpolicy="no-referrer">
</div><br>
<div align="center">
<img aid="1033278" zoomfile="https://di.gameres.com/attachment/forum/202203/11/101320hzollvzlorrv1jjx.jpg" data-original="https://di.gameres.com/attachment/forum/202203/11/101320hzollvzlorrv1jjx.jpg" width="600" id="aimg_1033278" inpost="1" src="https://di.gameres.com/attachment/forum/202203/11/101320hzollvzlorrv1jjx.jpg" referrerpolicy="no-referrer">
</div><br>
其中，1号和4号两个三点环，分别分支出“生命碎片”与“商人”两个小的环路区域，对应可收集的关键道具。<br>
<br>
玩家的主线流程由2、3两个环共同构成：玩家需要从德村一路向下，经过地图师之后向右穿过十字路下层到达车站处，打开回到十字路上层的捷径并激活存档点，之后前往挑战Boss，并在击败Boss并获得通往下一关的必备能力（波）之后打开另一条捷径，前往关卡的出口。<br>
<br>
对比高墙和城外不死镇（魂1的第一个正式关卡）的最简逻辑图并计算拓扑结构指标，可得下表，其中的γ3就是稳定因子。<br>
<br>
<div align="center">
<img aid="1033279" zoomfile="https://di.gameres.com/attachment/forum/202203/11/101320amjlp444y7jmueou.jpg" data-original="https://di.gameres.com/attachment/forum/202203/11/101320amjlp444y7jmueou.jpg" width="600" id="aimg_1033279" inpost="1" src="https://di.gameres.com/attachment/forum/202203/11/101320amjlp444y7jmueou.jpg" referrerpolicy="no-referrer">
</div><br>
<div align="center">
<img aid="1033280" zoomfile="https://di.gameres.com/attachment/forum/202203/11/101321z0v52g1vqk15k0gy.jpg" data-original="https://di.gameres.com/attachment/forum/202203/11/101321z0v52g1vqk15k0gy.jpg" width="600" id="aimg_1033280" inpost="1" src="https://di.gameres.com/attachment/forum/202203/11/101321z0v52g1vqk15k0gy.jpg" referrerpolicy="no-referrer">
</div><br>
<div align="center">
<img aid="1033281" zoomfile="https://di.gameres.com/attachment/forum/202203/11/101321oxng656bz3xhxhta.jpg" data-original="https://di.gameres.com/attachment/forum/202203/11/101321oxng656bz3xhxhta.jpg" width="600" id="aimg_1033281" inpost="1" src="https://di.gameres.com/attachment/forum/202203/11/101321oxng656bz3xhxhta.jpg" referrerpolicy="no-referrer">
</div><br>
*细心的读者可能会发现，此处高墙的二、三阶驻点数与引文的计算结果有出入，笔者认为是尼莫大神在计算时出现了偏误。易知如上编号的高墙最简逻辑图二阶驻点对分别为（离塔篝火，飞龙塔），（离塔篝火，1号篝火），（离塔篝火，Boss），（飞龙塔，Boss），（飞龙塔，1号篝火），换言之就是存在这5种取法，使得删去两个点之后，这张图变成非连通图，故二阶驻点对数为5。原文高墙的二阶驻点对数为3，应为偏误。感兴趣的读者可以自行验算一下，笔者也将计算驻点对数、Cheeger数和稳定因子的python算法附在文后供查阅。<br>
<br>
众所周知，一款游戏前2小时的体验是最重要的，因为这是玩家从接触这款游戏到建立第一印象的“黄金时间”。根据（沃-茨基-硕德）心理动力学理论，玩家在付完款后第一次游玩时的动力往往是最高的，随着游玩时间的推移会急剧下降，一旦在前两小时没有精准呈现出游戏的特色，提供足够的正向反馈，满足玩家的心理预期，后续就很难再把游戏的内容和价值观传递出去，遑论建立起深层次的价值认可、实现“产品势能”的提高了。<br>
<br>
通过对比《空洞骑士》、《黑暗之魂3》、《黑暗之魂1》三款游戏的第一个正式关卡，也就是各自的前2小时内容来看，不难发现，在顶数和边数相近的情况下，空的首关稳定因子竟然比魂1魂3都要高，amazing！宫崎老贼跌落神坛！换言之，与洛斯里克高墙和城外不死镇相比，遗忘十字路的关卡设计存在着更优秀、更丰富、更多层次，也就是更有“魂味”的环路结构。而城外不死镇相比高墙更高的稳定因子，意味着从拓扑结构的角度来看，魂1的首个关卡地图相比魂3在环路结构上更为优秀，“魂味”更足，这也符合魂系列老玩家对两作的对比评价。<br>
<br>
<font color="#de5650">3.2.3 全连通环路——最简逻辑图的局限性与解决思路</font><br>
<br>
当然，上文结论只是基于最简逻辑图而言。既然十字路的最简逻辑图和最小生成树如此的清晰，为什么还会让人迷路呢？为了回答这个问题，我们回到自然逻辑图，可以发现，十字路拥有四层连通的水平结构，但最简逻辑图只体现了三层。十字路上层存在着茫茫多的开放区域，各自之间完全依靠全连通键相连，甚至出现了大规模的全连通环路结构（路口-大厅-米拉环），会给玩家的方向辨认带来一定的困难，而这种体验在最简逻辑图上没有得到体现：因为巨大的全连接环在缩并过程中全部收拢到了一个不动点上。<br>
<br>
<div align="center">
<img aid="1033282" zoomfile="https://di.gameres.com/attachment/forum/202203/11/101321aegqepyb13b4eelh.jpg" data-original="https://di.gameres.com/attachment/forum/202203/11/101321aegqepyb13b4eelh.jpg" width="600" id="aimg_1033282" inpost="1" src="https://di.gameres.com/attachment/forum/202203/11/101321aegqepyb13b4eelh.jpg" referrerpolicy="no-referrer">
</div><br>
事实上笔者认为，在设计中应当避免这样的“大规模全连通环路”设计。这是由记忆原理决定的，记忆往往是基于点、而非基于线或者面的：人们需要依赖特定的“锚点”来锚定一段记忆。玩家往往用自己印象深刻的两个端点来锚定一段旅程，而旅途的过程只有模糊的、印象性的回忆。例如：从魂1的传火祭祀场出发，一路向下艰难地穿过病村最后打开飞龙谷的捷径返回到传火祭祀场。“初见时捷径的打开，是如此地令人印象深刻” [1] ，以至于随着时间推移，玩家甚至不会记得中间穿越了多少地形、有多少篝火、打了多少个Boss，但依然能凭借着起点和终点的单向门锚定这段旅程。作为设计者，需要主动给玩家提供这样的记忆锚点，避免玩家在游戏流程里陷入混沌的漫游中。<br>
<br>
笔者建议，将米拉-过道处的全连通键改为单向门，在十字路第一、二层的大环路结构增加一道成环键来控制玩家的行动路径，以此构造有向环的同时，将玩家的注意力吸引到第二处成环键也就是笼子捷径附近；并且将龙牙哥-救虫的区域连接到米拉处而非过道处，一方面用对抗精英敌人龙牙哥的战斗来强化此处捷径通路的记忆——一旦玩家在与龙牙哥的战斗中落败，能够从刚刚打开的捷径通路迅速从德特茅斯的存档点返回此处，另一方面把可收集道具——幼虫作为发现捷径的奖励。这样综合下来能够一定程度上改善游戏前期在十字路上层“迷路”的体验。<br>
<br>
<div align="center">
<img aid="1033283" zoomfile="https://di.gameres.com/attachment/forum/202203/11/101321eggingzjxacpigpp.jpg" data-original="https://di.gameres.com/attachment/forum/202203/11/101321eggingzjxacpigpp.jpg" width="600" id="aimg_1033283" inpost="1" src="https://di.gameres.com/attachment/forum/202203/11/101321eggingzjxacpigpp.jpg" referrerpolicy="no-referrer">
</div><br>
同时得益于关卡本身优秀的环路结构设计，这样的改动并不会过多地影响关卡的整体结构。画出改动后的最简逻辑图并计算稳定因子，可以发现，改动后的地图结构依然属于中普适类，与改动前相比并未丢失过多的环路结构稳定性。<br>
<br>
<div align="center">
<img aid="1033284" zoomfile="https://di.gameres.com/attachment/forum/202203/11/101322sd4d22z55r2rca26.jpg" data-original="https://di.gameres.com/attachment/forum/202203/11/101322sd4d22z55r2rca26.jpg" width="600" id="aimg_1033284" inpost="1" src="https://di.gameres.com/attachment/forum/202203/11/101322sd4d22z55r2rca26.jpg" referrerpolicy="no-referrer">
</div><br>
<div align="center">
<img aid="1033285" zoomfile="https://di.gameres.com/attachment/forum/202203/11/101322m0q0a4t2444vqiax.jpg" data-original="https://di.gameres.com/attachment/forum/202203/11/101322m0q0a4t2444vqiax.jpg" width="600" id="aimg_1033285" inpost="1" src="https://di.gameres.com/attachment/forum/202203/11/101322m0q0a4t2444vqiax.jpg" referrerpolicy="no-referrer">
</div><br>
对修改后的十字路的最小生成树进行观察，可以发现：增加的一个三顶环以米拉线作为分支顶点，将重要的叙事剧情碎片从海量的开放区域中抽出来，作为重要的探索支线加以强调；同时关卡的主线流程和其他分支并未受影响。这正是我们想要的结果。<br>
<br>
总结而言，最简逻辑图及其拓扑指标计算，作为校验关卡设计的一种工具，是存在一定局限性的，这是由于其对全连通环路结构的忽视导致的，而大规模全连通环路是关卡流程设计需要规避的要素。<br>
<br>
在进行缩并工作之前，设计者需要：<br>
<br>
1 观察自然逻辑图，确保关卡结构中不存在大规模的全连通环路，在必要时添加成环键，对环路结构进行处理。<br>
<br>
2 对添加成环键之后的形成的新结构的最简逻辑图计算驻点对数和稳定因子，以此进行校验，确保没有过多地破坏原有环路结构的整体设计。<br>
<br>
<strong>3.3 理论应用——以《只狼》为例</strong><br>
<br>
《只狼》这款游戏，相信本文的读者都不会陌生，笔者也就不再过多介绍。作为一款剑戟风格鲜明的作品，尽管其全流程依然遵循着魂系列相似的流程，但具体到关卡层面，《只狼》把战斗体验作为核心内容，地图探索的特性被大大弱化了。本文以这一作为例，尝试通过分析，把关卡结构拓扑理论延伸到“不以地图探索为玩法核心”的游戏中，探讨一款游戏为什么在关卡层面“不具有魂味”，以及在这样的游戏中，理论工具的应用范围和局限性。<br>
<br>
<font color="#de5650">3.3.1 线性关卡中环路结构的作用分析</font><br>
<br>
<div align="center">
<img aid="1033286" zoomfile="https://di.gameres.com/attachment/forum/202203/11/101322l5b0sl7p7pcyllcn.jpg" data-original="https://di.gameres.com/attachment/forum/202203/11/101322l5b0sl7p7pcyllcn.jpg" width="600" id="aimg_1033286" inpost="1" src="https://di.gameres.com/attachment/forum/202203/11/101322l5b0sl7p7pcyllcn.jpg" referrerpolicy="no-referrer">
</div><br>
<div align="center">
<img aid="1033287" zoomfile="https://di.gameres.com/attachment/forum/202203/11/101322zw9kxnjo2rn3wtkr.jpg" data-original="https://di.gameres.com/attachment/forum/202203/11/101322zw9kxnjo2rn3wtkr.jpg" width="600" id="aimg_1033287" inpost="1" src="https://di.gameres.com/attachment/forum/202203/11/101322zw9kxnjo2rn3wtkr.jpg" referrerpolicy="no-referrer">
</div><br>
沿用上文提到的思路，对《只狼》第一个正式关卡破旧寺院-鬼形部进行结构拆分，可以得到其自然逻辑图和最简逻辑图如下所示。<br>
<br>
计算稳定因子的意义已经不大了：明眼人都能看出，这段关卡几乎是完完全全的线性结构，而且除了赤鬼（非邪道）与大蛇两处无法绕过之外，其他地方甚至称得上是鬼佛之间直接相连，遍布在鬼佛周围的战点能够直接被“绕过”而非“润过”，显得非常多余。这不难理解：作为玩家获得忍义手这一新体验道具后的首个关卡，这一段流程承载着相当重要的教学引导任务。大量的勾索点设计让玩家能够使用勾索跳过战点直达鬼佛，正是在强化这一新道具的作用。<br>
<br>
这也是《只狼》自发售之初一直到现在，其“魂血统”都有争议的原因之一：相当一部分魂系列的老玩家认为这款游戏的地图设计丢失了“魂味”，也就是失去了优秀的、丰富的、多层次的环路结构。这一点在其前两个小时的游戏流程中体现的尤为充分，带来的刻板印象也根深蒂固。<br>
<br>
但这不影响《只狼》成为一款出色的游戏：其优秀的战斗、美术和叙事体验，让这款游戏成为了年度最佳；也借着直播行业的兴起成功出圈，连着带火了制作人宫崎英高的名字和“魂系列”的概念。这也印证了笔者在背景介绍里的观点：游戏整体素质与综合体验取决于多个维度的设计，关卡结构的“魂味”有多重，与游戏的品质甚至整体体验并无直接的关系，玩家依然能够从系统、叙事等维度的设计获得“魂系列”的感受。<br>
<br>
当然了，这也并不妨碍我们用最简逻辑图来分析线性流程关卡中环路结构的设计思路，以此来揣摩设计者的意图。<br>
<br>
观察图上的三处极小环，一处在打完Boss之后打开角楼的门，为关卡提供了物理意义上的返回通路，保证了空间上的连通——倘若打完Boss只能通过传送点回到之前的区域，那也太不优雅了。环路结构的第一个作用：保证关卡在形式上的完整性。<br>
<br>
<div align="center">
<img aid="1033288" zoomfile="https://di.gameres.com/attachment/forum/202203/11/101322nzznjplixhxeqxxi.jpg" data-original="https://di.gameres.com/attachment/forum/202203/11/101322nzznjplixhxeqxxi.jpg" width="600" id="aimg_1033288" inpost="1" src="https://di.gameres.com/attachment/forum/202203/11/101322nzznjplixhxeqxxi.jpg" referrerpolicy="no-referrer">
</div><br>
另两处则围绕着山顶祭奠帮、铁炮山道以及城门道和虎口两个鬼佛之间构建了两道回环。相信玩过的朋友都有印象：沿着山路走城门道-铁炮通路-虎口鬼佛这条路线是极为困难的，城楼的铁炮哥、廊门上的火枪兵以及山路上的蓑衣兵对狼形成了全方位的夹击。但倘若在几次攻坚失败之后，细心观察周围局势，便能发现只要从城门道鬼佛的侧面跃下，就可以沿着勾索点一路潜行到铁炮哥的背后，在战斗开始前首先解决掉这个最棘手的敌人。这也是《只狼》这款游戏使用关卡设计传递给玩家的信号：身为忍者，就不应当直冲蛮干；善用地形要素，以暗杀的手段从隐匿之处消灭敌人才是忍者之风（隼龙：哦是吗）。这类设计在后续的关卡流程中也多次出现。环路结构的第二个作用：为玩法设计提供空间。<br>
<br>
<div align="center">
<img aid="1033289" zoomfile="https://di.gameres.com/attachment/forum/202203/11/101323d0f0piizdimz21p4.jpg" data-original="https://di.gameres.com/attachment/forum/202203/11/101323d0f0piizdimz21p4.jpg" width="600" id="aimg_1033289" inpost="1" src="https://di.gameres.com/attachment/forum/202203/11/101323d0f0piizdimz21p4.jpg" referrerpolicy="no-referrer">
</div><br>
除此之外上，不妨回顾寺庙到城门这段流程，两个必打的Boss赤鬼和鬼形部都提供了一定程度上的逃课手段，且线索情报隐藏在分支流程的对话细节中，分别是货郎穴山对话提供的吹火筒情报——用来对付怕火的赤鬼、以及偷听爱马士获得的鞭炮情报——用来对付骑马的鬼形部。而我们观察这两段分支流程对应的关键NPC的位置——货郎穴山、老婆婆（提供回到三年前的念珠以获得吹火筒，在城门道鬼佛附近，铁炮山路入口处）、爱马士、祭奠帮（购买鞭炮），可以发现，他们全部位于最简逻辑图的成环节点上。除此之外，暗示修罗结局，作为关键剧情碎片的另一个老婆婆，也在成环节点的捷径处。这决不能说是巧合，而一定是设计者有意为之了。环路结构的第三个作用：作为成环节点的开放区域能够吸引玩家注意，适合用来承载叙事和引导相关的分支流程内容。<br>
<br>
<div align="center">
<img aid="1033290" zoomfile="https://di.gameres.com/attachment/forum/202203/11/101323i3aeegr5kzc7k69d.jpg" data-original="https://di.gameres.com/attachment/forum/202203/11/101323i3aeegr5kzc7k69d.jpg" width="600" id="aimg_1033290" inpost="1" src="https://di.gameres.com/attachment/forum/202203/11/101323i3aeegr5kzc7k69d.jpg" referrerpolicy="no-referrer">
</div><br>
线性流程中添加局部环路，以此达成特定意图的关卡设计方法还有许多，笔者在此只是结合关卡结构理论简单举例分析，感兴趣的同好可以私下交流更多的案例进行分析。<br>
<br>
<font color="#de5650">3.3.2 场景复用——基于最简逻辑图的一种方法</font><br>
<br>
众所周知嗷，苇名城是《只狼》中最重要的一张地图，连接了城邑、仙峰寺、苇名之底、坠落之谷四个地区，不仅在叙事上是故事的中心，在关卡和流程结构上也处于绝对的核心地位。正式展开在苇名城的关卡流程（序章的教学关不算）有三段，分别是：<br>
<br>
1 正式流程首次击败火牛后进入 - 击败天守阁弦一郎结束；<br>
<br>
2 收集完结宿之石、馨香之莲、不死斩三件剧情核心道具之后，枭入侵苇名城 - 击败枭结束；（此时如果走修罗结局则不会触发第三次的流程，周目提前结束）<br>
<br>
3 前往源之宫完成拜泪后，内府军入侵 - 击败剑圣一心结束。<br>
<br>
先看狼第一次进入这一段：<br>
<br>
由于《只狼》相比黑魂增加了勾索的机制，地图在z轴的纵深大大增加，且跌落伤害的判定宽松了许多，所以“从高处跳下”这样的单向路变得非常普遍。<br>
<br>
最终得到的自然逻辑图（红色虚线框部分）以及最简逻辑图如下所示，其中弦一郎和白蛇神社由于不满足缩并原则，在最简逻辑图上只能以“单顶环挂件”的形式存在。<br>
<br>
<div align="center">
<img aid="1033291" zoomfile="https://di.gameres.com/attachment/forum/202203/11/101323bay6f2a7b21yfayf.jpg" data-original="https://di.gameres.com/attachment/forum/202203/11/101323bay6f2a7b21yfayf.jpg" width="600" id="aimg_1033291" inpost="1" src="https://di.gameres.com/attachment/forum/202203/11/101323bay6f2a7b21yfayf.jpg" referrerpolicy="no-referrer">
</div><br>
<div align="center">
<img aid="1033292" zoomfile="https://di.gameres.com/attachment/forum/202203/11/101324v5c4m2dpp5uwd2zp.jpg" data-original="https://di.gameres.com/attachment/forum/202203/11/101324v5c4m2dpp5uwd2zp.jpg" width="600" id="aimg_1033292" inpost="1" src="https://di.gameres.com/attachment/forum/202203/11/101324v5c4m2dpp5uwd2zp.jpg" referrerpolicy="no-referrer">
</div><br>
从最简逻辑图上大概能看出来，以主城鬼佛为中心，流程分出了两条分支路径：一条在进城之后向左，联系贮水城区和地牢入口两个地区，分别通往仙峰寺和苇名之底；另一条则是向右勾索攀上屋顶，从武士候命室进入内城，进入内城后玩家可以沿天守阁一路上行、杀到顶楼的弦一郎，也可以向下打开望楼城门并一直前进到坠落之谷的铁炮要塞。<br>
<br>
再看一下狼的第二次进入：<br>
<br>
狼二次进入时，是在收集完三件关键剧情道具后。按照剧情设定，枭攻占了苇名，城内外所有的门都被关闭，鬼佛也失效了，唯一的通路就是地牢入口。<br>
<br>
与第一次进入时相比，开放区域之间的连通关系发生了如下变化，我们在自然逻辑图上加以反映：<br>
<br>
1 玩家已经打开的单向门没有关闭，全部成为了全连通状态<br>
<br>
2 学会潜水之后，桥下水道与平台处水道连通成为自由键<br>
<br>
3 平台处和下层屋顶增加的梯子，使得平台、屋顶下层、屋顶上层之间的单向路变成了全连通<br>
<br>
4 由于主城入口的桥断了，主城入口与偷听之桥之间变为单向路（可以勾索过去但无法原路返回）<br>
<br>
<div align="center">
<img aid="1033293" zoomfile="https://di.gameres.com/attachment/forum/202203/11/101324won0nxuxnpohmwp0.jpg" data-original="https://di.gameres.com/attachment/forum/202203/11/101324won0nxuxnpohmwp0.jpg" width="600" id="aimg_1033293" inpost="1" src="https://di.gameres.com/attachment/forum/202203/11/101324won0nxuxnpohmwp0.jpg" referrerpolicy="no-referrer">
</div><br>
<div align="center">
<img aid="1033294" zoomfile="https://di.gameres.com/attachment/forum/202203/11/101324tpfhsshssk88k6fs.jpg" data-original="https://di.gameres.com/attachment/forum/202203/11/101324tpfhsshssk88k6fs.jpg" width="600" id="aimg_1033294" inpost="1" src="https://di.gameres.com/attachment/forum/202203/11/101324tpfhsshssk88k6fs.jpg" referrerpolicy="no-referrer">
</div><br>
再看三次进入：<br>
<br>
三次进入时，起点和终点均发生了变化，狼从天守阁的神子居室出发，需要赶到桥下山谷的暗道前。此次进入时，开放区域之间的连接关系发生了如下变化，我们在自然逻辑图上加以反映：<br>
<br>
1 地牢/投身之处/望月阁的道路都被切断，将这两片区域从关卡中剔除；<br>
<br>
2 主城鬼佛对岸的勾索被烧毁，下水的道路变成单向路（下水后无法通过勾索直接返回）；<br>
<br>
3 城区增加的风筝构造了从主城下层屋顶到遗冢的单向路<br>
<br>
4 蛇谷的桥被修好，将城邑地区和主城连接到一起，导向怨鬼支线。<br>
<br>
<div align="center">
<img aid="1033295" zoomfile="https://di.gameres.com/attachment/forum/202203/11/101324cnf61dxyw16cyfwn.jpg" data-original="https://di.gameres.com/attachment/forum/202203/11/101324cnf61dxyw16cyfwn.jpg" width="600" id="aimg_1033295" inpost="1" src="https://di.gameres.com/attachment/forum/202203/11/101324cnf61dxyw16cyfwn.jpg" referrerpolicy="no-referrer">
</div><br>
<div align="center">
<img aid="1033296" zoomfile="https://di.gameres.com/attachment/forum/202203/11/101324fhsom88am3r2r1sr.jpg" data-original="https://di.gameres.com/attachment/forum/202203/11/101324fhsom88am3r2r1sr.jpg" width="600" id="aimg_1033296" inpost="1" src="https://di.gameres.com/attachment/forum/202203/11/101324fhsom88am3r2r1sr.jpg" referrerpolicy="no-referrer">
</div><br>
<div align="center">
<img aid="1033297" zoomfile="https://di.gameres.com/attachment/forum/202203/11/101325npgtredtezyt1x7g.jpg" data-original="https://di.gameres.com/attachment/forum/202203/11/101325npgtredtezyt1x7g.jpg" width="600" id="aimg_1033297" inpost="1" src="https://di.gameres.com/attachment/forum/202203/11/101325npgtredtezyt1x7g.jpg" referrerpolicy="no-referrer">
</div><br>
计算三次苇名城关卡的拓扑指标如下表所示<br>
<br>
<div align="center">
<img aid="1033298" zoomfile="https://di.gameres.com/attachment/forum/202203/11/101325tbbiebtd01vtlcid.jpg" data-original="https://di.gameres.com/attachment/forum/202203/11/101325tbbiebtd01vtlcid.jpg" width="600" id="aimg_1033298" inpost="1" src="https://di.gameres.com/attachment/forum/202203/11/101325tbbiebtd01vtlcid.jpg" referrerpolicy="no-referrer">
</div><br>
对比最简逻辑图和拓扑指标可以看出，三次关卡的结构完全不同。<br>
<br>
在场景资源没有大的变动、开放区域划分不变的情况下，仅仅通过改变个别地区的键的关系以及玩家的进入点和Boss点位置，就实现了关卡结构的大改动，给玩家带来的流程体验也完全不同。<br>
<br>
值得一提的是，在第一次的关卡结构中，由于贮水城区和地牢两片区域单独连接在主城鬼佛上，与其他区域没有交集，导致主城鬼佛成为一个一阶驻点，整个关卡实际上被这个点分成了相对独立的两个部分。而在二、三次进入时，旱井门的常开让平台与贮水城区形成全连通关系，且平台增加的勾索点让贮水城区与主城的房顶成为全连通关系，如此一来使得贮水城区-主城鬼佛-武士候命室形成了一个新的环状结构，消除了一阶驻点，让整个关卡的连通度提高到了2。类似的方法可以用来指导探索型关卡的设计：避免驻点的存在，通过添加键构建包含驻点的环状结构来保证关卡的连通度大于1。<br>
<br>
<div align="center">
<img aid="1033299" zoomfile="https://di.gameres.com/attachment/forum/202203/11/101325ujwtc7m3je777tje.jpg" data-original="https://di.gameres.com/attachment/forum/202203/11/101325ujwtc7m3je777tje.jpg" width="600" id="aimg_1033299" inpost="1" src="https://di.gameres.com/attachment/forum/202203/11/101325ujwtc7m3je777tje.jpg" referrerpolicy="no-referrer">
</div><br>
这种“对关卡场景进行细节/方向改动来创造新体验，提高美术资源利用效率”的做法在不少游戏里都有体现：《仁王2》的支线关卡地图就是在主线关卡的地图的基础上，更改其中一些开放区域之间的连通关系得到的。《月下夜想曲》做的更为极致：仅仅将地图换了个方向，让玩家从终点出发，沿着完全相反的方向再探索一遍，便形成所谓的“逆城”（一些竞速游戏也有类似的做法，例如《尘埃》系列的Reverse赛道）。究其这样做的终极前提，还是之前提到的，玩家往往依靠端点来锚定记忆，对过程只有模糊的印象，所以哪怕只是将顺序反过来、或是将路口的连接关系稍作改变，在改变关卡结构的同时，对怪物和POI的投放也做出相应调整，如此对玩家而言就是新的关卡内容。<br>
<br>
具体到工作中的实际做法，经过上面的分析相信也好理解：<br>
<br>
1 划分原关卡的开放区域，确认连接关系；<br>
<br>
2 根据设计需要，视情况修改一处或几处连接关系、以及初始点和最终点位置，并确认这样的逻辑修改映射到具体关卡中是可实现的——像是“给苇名城增加一部电梯“这样的做法虽然能够在逻辑上增加连接关系、改变关卡结构，但实际操作起来就不太现实了；<br>
<br>
3 对比更改前后的最简逻辑图，确认关卡的结构确实发生了变化——“稍作改变就是新体验”不意味着“不做改变也察觉不出来”；<br>
<br>
4 有需要的话，对更改后的最简逻辑图及其稳定因子进行评估，确保新关卡的逻辑结构满足设计目的——下一节会分析说明，为什么只有以“地图探索”作为设计目的的关卡才适合使用稳定因子进行评估。<br>
<br>
5 当然，想要在游戏中这么做，一定要在世界观上有一个让玩家信服的解释：譬如像《只狼》或《月下》这样用一个概念上完整的故事来交代前因后果。像《仁王2》这样寥寥几行字就把玩家打发到支线关卡里去的做法，不值得提倡。<br>
<br>
<font color="#de5650">3.3.3 成环质量——稳定因子评价指标的局限性</font><br>
<br>
上一小节的分析中暴露出的一个问题，相信细心的读者已经观察到了。那就是单从稳定因子这个指标来看，苇名城的稳定因子并不低（0.9229对应内府入侵），甚至远超过了《黑暗之魂3》的洛斯里克高墙（0.8829），略高于《黑暗之魂1》的城外不死镇（0.9119），刚好持平《空洞骑士》的遗忘十字路（0.9229）。这是否说明，内府入侵版本的苇名城，就是一个拥有优秀的、丰富的、多层次的环路结构的，充满“魂味”的，能够为其“魂血统”正名的地图呢？答案当然是否定的。<br>
<br>
<div align="center">
<img aid="1033300" zoomfile="https://di.gameres.com/attachment/forum/202203/11/101325du7zkk5gcmpc4zmy.jpg" data-original="https://di.gameres.com/attachment/forum/202203/11/101325du7zkk5gcmpc4zmy.jpg" width="600" id="aimg_1033300" inpost="1" src="https://di.gameres.com/attachment/forum/202203/11/101325du7zkk5gcmpc4zmy.jpg" referrerpolicy="no-referrer">
</div><br>
对比《空洞骑士》和《只狼》两张地图的最简逻辑图可以发现，十字路的结构中，单向门“捷径”的设计非常多，且每条捷径都能对应到一个极小环的成环，玩家的主线和支线探索流程及目标因此得到了很清晰的呈现，或者说流程是“可控”的：这对于以“地图探索”作为核心体验内容的游戏来说相当重要。反观苇名城的地图，其“成环”的核心原因是地图中大量作为不动点的鬼佛不满足缩并的要求，且成环质量相当低：不仅缺乏单向门这种能给玩家带来强烈的探索反馈的要素，而且由于不动点之间由大量的全连通键相连，缺乏单向门这样的高优先级成环键，实际的环和树的结构并不能反映和控制玩家的游玩流程——玩家可以从神子居室的窗口直取贮水城区入口鬼佛，过程中甚至完全不会遇到主城鬼佛武士-遗冢-怨鬼支线和水生氏成支线的任何入口。<br>
<br>
因此我们不难得出这样的结论：<br>
<br>
尽管关卡的自然逻辑图和最简逻辑图可以用来分析关卡的结构并指导设计，但是当我们使用基于高阶连通度推导出的“稳定因子”来评价关卡的成环质量时，需要明确其应用范畴仅限于“以地图探索为主要游玩内容”的游戏，并且需要关注成环键的类型以及成环的质量，确保设计者  
</div>
            