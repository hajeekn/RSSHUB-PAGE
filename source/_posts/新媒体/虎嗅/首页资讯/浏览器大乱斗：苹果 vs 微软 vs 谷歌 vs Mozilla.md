
---
title: '浏览器大乱斗：苹果 vs 微软 vs 谷歌 vs Mozilla'
categories: 
 - 新媒体
 - 虎嗅
 - 首页资讯
headimg: 'https://img.huxiucdn.com/article/content/202203/09/065903141656.png?imageView2/2/w/1000/format/png/interlace/1/q/85'
author: 虎嗅
comments: false
date: Wed, 09 Mar 2022 00:18:00 GMT
thumbnail: 'https://img.huxiucdn.com/article/content/202203/09/065903141656.png?imageView2/2/w/1000/format/png/interlace/1/q/85'
---

<div>   
<p><span class="text-remarks" label="备注">本文来自微信公众号：</span><a href="https://mp.weixin.qq.com/s/WdTRq31CRjy90KiN88dwtw" target="_blank" rel="nofollow" style="text-decoration: none;"><span class="text-remarks">差评（ID：chaping321）</span></a><span class="text-remarks">，作者：差评君，原文标题：《微软带头打了30年，这场屏幕里的大乱斗，终于要结束了。。。》，题图来自：《斯巴达300勇士》</span></p><p>最近有这么一条新闻：苹果、微软、谷歌和 Mozilla 这几大浏览器制造商宣布将要联合起来，解决网页适配问题了。</p><p>由于这个“联合军”几乎包括了所有主要的浏览器供应商，随着他们的协作，程序员们的工作将大大减少，而网民们也将拥有更舒适、统一的浏览体验。</p><p> 像下面这样一些比较奇怪的页面效果，将不复存在。<br></p><p class="img-center-box"><img class="lazyImg" _src="https://img.huxiucdn.com/article/content/202203/09/065903141656.png?imageView2/2/w/1000/format/png/interlace/1/q/85" data-w="928" data-h="468" label="图片备注" src="https://img.huxiucdn.com/article/content/202203/09/065903141656.png?imageView2/2/w/1000/format/png/interlace/1/q/85" referrerpolicy="no-referrer"></p><p label="图片备注" class="text-img-note">畸形的图像显示（左图）</p><p label="图片备注" class="text-img-note"><img class="lazyImg" _src="https://img.huxiucdn.com/article/content/202203/09/065905844623.gif" data-w="879" data-h="396" style="text-align: center;" src="https://img.huxiucdn.com/article/content/202203/09/065905844623.gif" referrerpolicy="no-referrer"><br></p><p label="图片备注" class="text-img-note">很不对头的动画效果</p><p label="图片备注" class="text-img-note"><img class="lazyImg" _src="https://img.huxiucdn.com/article/content/202203/09/065906973488.png?imageView2/2/w/1000/format/png/interlace/1/q/85" data-w="1000" data-h="471" style="text-align: center;" src="https://img.huxiucdn.com/article/content/202203/09/065906973488.png?imageView2/2/w/1000/format/png/interlace/1/q/85" referrerpolicy="no-referrer"><br></p><p label="图片备注" class="text-img-note">不按预期出牌的粘性表头</p><p>之所以不同网站在不同浏览器上的显示或互动效果不同，是因为不同的浏览器对同一段代码有不同的解析。</p><p><strong>如果网站不针对不同浏览器做适配，那用户体验就会直接爆炸。</strong></p><p>其实，为了解决不同浏览器各自为营导致的兼容、适配问题，从浏览器诞生之初，各个巨头就没少折腾。</p><p>其中非常有趣的一件事情，是由微软掀起的，俗称 UA 大混战的“战役”。</p><p>今天咱们就来聊聊这个事情。</p><p class="img-center-box"><img class="lazyImg" _src="https://img.huxiucdn.com/article/content/202203/09/065907801024.png?imageView2/2/w/1000/format/png/interlace/1/q/85" data-w="908" data-h="761" label="图片备注" src="https://img.huxiucdn.com/article/content/202203/09/065907801024.png?imageView2/2/w/1000/format/png/interlace/1/q/85" referrerpolicy="no-referrer"></p><p label="图片备注" class="text-img-note">几乎所有的浏览器， UA 开头都是 Mozilla</p><p>在正式开始之前，别急着问 UA 是啥，先听一个小故事。<br></p><p>约 30 年前，第一次“浏览器世界大战”时，微软跟 Netscape 杠上了。</p><p>Netscape，即大名鼎鼎的网景，他们的浏览器名为网景导航者<span class="text-remarks" label="备注">（Netscape Navigator） </span>，内部代号为 Mozilla 。</p><p>就像大家现在看到 IE 浏览器的图标会想到上网一样，当年大家上网不说上网，而是说上网景。</p><p>因为当时的网景整了很多创新之举，比如搭载 Cookie 、支持 JavaScript 脚本以及 Frames 技术，功能非常强大，饱受网虫欢迎。</p><p>就 Frames 技术来说，它使得浏览器窗口能同时显示多个网页，每个 Frame 里可以放一个网页，网页相互独立。</p><p class="img-center-box"><img class="lazyImg" _src="https://img.huxiucdn.com/article/content/202203/09/065909735244.png?imageView2/2/w/1000/format/png/interlace/1/q/85" data-w="621" data-h="528" src="https://img.huxiucdn.com/article/content/202203/09/065909735244.png?imageView2/2/w/1000/format/png/interlace/1/q/85" referrerpolicy="no-referrer"></p><p>放到今天，大家看起来肯定感觉：就这？？？<br></p><p>但在互联网早期，网页基本上就是一行行的字跟简单的图片构成的。像下图一样。</p><p>相比之下，Frames 赋予了网页更强大的实用性、便捷性，瞬间流行了起来。</p><p class="img-center-box"><img class="lazyImg" _src="https://img.huxiucdn.com/article/content/202203/09/065911991131.png?imageView2/2/w/1000/format/png/interlace/1/q/85" data-w="1000" data-h="631" src="https://img.huxiucdn.com/article/content/202203/09/065911991131.png?imageView2/2/w/1000/format/png/interlace/1/q/85" referrerpolicy="no-referrer"></p><p>正是因为前述不同浏览器之间巨大的特性差异，用夸张手法来说，网景都支持像 Frames 这样的高级特性了，有的浏览器可能连图片显示都还没支持。</p><p>对于网站来说，给不支持 Frames 的网站，返回带 Frames 的页面显然是不合适的。</p><p>于是，User Agent 嗅探诞生了。</p><p>UA 是什么东西呢？<br></p><p><strong>UA 就是浏览器的“身份证”，上面有浏览器的身份信息，把它递给网站，网站就知道你是谁，能做啥<span class="text-remarks" label="备注">（比如能不能显示图片）</span>，然后给你返回对应的网页。</strong></p><p class="img-center-box"><img class="lazyImg" _src="https://img.huxiucdn.com/article/content/202203/09/065913150177.png?imageView2/2/w/1000/format/png/interlace/1/q/85" data-w="1000" data-h="604" src="https://img.huxiucdn.com/article/content/202203/09/065913150177.png?imageView2/2/w/1000/format/png/interlace/1/q/85" referrerpolicy="no-referrer"></p><p>比如下面是一个 Netscape 的 UA ，网站看到 Mozilla/1.0 就知道浏览器跟浏览器的版本号，看到后面的 Win3.1 就能知道相关操作系统。</p><blockquote><p>Mozilla/1.0 ( Win3.1 ) </p></blockquote><p>UA 识别到这是网景浏览器以后，网站服务端表示，这个浏览器很厉害啊！我要给他发一个高级的页面。</p><p>如果是其他浏览器，那网站服务端就会发一个普通的页面过去，毕竟，万一发去高级的，它不支持怎么办？<br></p><p>当时的微软已经是大公司了，手底下有一批优秀的软件工程师专门做 IE 浏览器，很多功能并不比网景落后，像 Frames 这些 IE 也有。</p><p class="img-center-box"><img class="lazyImg" _src="https://img.huxiucdn.com/article/content/202203/09/065914577758.png?imageView2/2/w/1000/format/png/interlace/1/q/85" data-w="615" data-h="419" label="图片备注" src="https://img.huxiucdn.com/article/content/202203/09/065914577758.png?imageView2/2/w/1000/format/png/interlace/1/q/85" referrerpolicy="no-referrer"></p><p label="图片备注" class="text-img-note">IE 1.0</p><p>但很可惜，IE 当时还是一个“新生儿”，尽管它支持高特性的网页，但网站却没有给 IE 做适配，给它返回的是普通网页。</p><p>可是 IE 已经等不及了，它迫切的提想要打败网景，夺下这片市场，所以它决定 —— “骗”。</p><p>你不是通过识别 UA 来判断返回什么网页么？好，那我就披一层网景的衣服，假装是网景，骗你给我高特性的网页！</p><p>靠着种种手段，比如捆绑销售，IE 的占有率节节攀升，到 IE 4.0 的时候，微软基本上是把网景打趴下。</p><p><img class="lazyImg" _src="https://img.huxiucdn.com/article/content/202203/09/065915220438.png?imageView2/2/w/1000/format/png/interlace/1/q/85" data-w="859" data-h="672" style="text-align: center;" label="图片备注" src="https://img.huxiucdn.com/article/content/202203/09/065915220438.png?imageView2/2/w/1000/format/png/interlace/1/q/85" referrerpolicy="no-referrer"><br label="图片备注" class="text-img-note"></p><p label="图片备注" class="text-img-note">IE 4.0</p><p>但网景也没有完全认输，在被收购之前公开了源代码，还用最初开发代号 Mozilla 创建了 Mozilla 组织。</p><p><strong>火狐浏览器就是这个组织的产物。</strong></p><p>为了跟之前的网景浏览器相区分，火狐在之前 UA 的基础上，加入了自己的标识：Firefox 。</p><p>同时 Mozilla 还写了一个叫 Gecko 的排版引擎，这个渲染引擎非常厉害，火狐也把它加入到了自己的 UA 之中。</p><p class="img-center-box"><img class="lazyImg" _src="https://img.huxiucdn.com/article/content/202203/09/065917910447.png?imageView2/2/w/1000/format/png/interlace/1/q/85" data-w="953" data-h="448" src="https://img.huxiucdn.com/article/content/202203/09/065917910447.png?imageView2/2/w/1000/format/png/interlace/1/q/85" referrerpolicy="no-referrer"></p><p>跟之前一样，网站也知道用 Gecko 引擎的浏览器会比较厉害，花活比较多，于是会为它准备更高级的页面，为其他浏览器准备普通页面。</p><p>其他浏览器也很苦恼，从技术层面我们明明也能实现这些，只是网站没给机会，于是也开始伪造“身份证”。</p><p>戏剧性的一幕出现了：<strong>所有浏览器都开始伪装自己是 Mozilla 。</strong></p><p>首先是 Linux 的追随者，他们编写了 Konqueror，引擎是 KHTML。</p><p>这群人认为 KHTML 跟 Gecko 一样好，但是网站却不给他们返回好的页面，于是开始伪装自己，还在 UA 里写下我们跟 Gecko 一样好。</p><blockquote><p> UA = Mozilla/5.0 (compatible; Konqueror/3.2; FreeBSD) </p><p>(KHTML， like Gecko) </p></blockquote><p class="img-center-box"><img class="lazyImg" _src="https://img.huxiucdn.com/article/content/202203/09/065918916078.png?imageView2/2/w/1000/format/png/interlace/1/q/85" data-w="1000" data-h="748" src="https://img.huxiucdn.com/article/content/202203/09/065918916078.png?imageView2/2/w/1000/format/png/interlace/1/q/85" referrerpolicy="no-referrer"></p><p>而苹果家的 Safari 呢，它基于 KHTML 引擎，但是加了新的特性，所以另起炉灶叫自己 WebKit 。</p><p>但同时，Safari 也不想失去那些为 KHTML 编写的东西，所以它也选择延续前面的 UA ，再加一点标识。</p><blockquote><p>Mozilla/5.0 (Macintosh; U; PPC Mac OS X; de-de)  AppleWebKit /85.7 (KHTML， like Gecko) Safari/85.5 </p></blockquote><p>而咱们现在最常用的 Chrome 浏览器呢，则是基于 WebKit 开发的，但也是做了修改，跟前人一样，也不想失去那些为 WebKit 编写的东西。</p><p>于是在 UA 中，他把自己伪装成这样：</p><blockquote><p>Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US) AppleWebKit/525.13 (KHTML， like Gecko) Chrome/0.2.149.27 Safari/525.13</p></blockquote><p>总之，无限套娃。</p><p><strong>最后，人人都不是 Mozilla，人人都是 Mozilla。</strong></p><p>围绕 UA 的骚操作还有很多，比如有些人明明用的是手机浏览器刷网页，但会通过修改 UA ，骗网站：“我是电脑！给我发对应的网页来。”</p><p>这样一来，就能规避手机网页中那些“打开 XX APP，查看全部 XX 评论”的拦截了。</p><p class="img-center-box"><img class="lazyImg" _src="https://img.huxiucdn.com/article/content/202203/09/065921517060.png?imageView2/2/w/1000/format/png/interlace/1/q/85" data-w="838" data-h="182" src="https://img.huxiucdn.com/article/content/202203/09/065921517060.png?imageView2/2/w/1000/format/png/interlace/1/q/85" referrerpolicy="no-referrer"></p><p>比如之前优酷对 iPhone 端的浏览器是不提供视频广告的。<br></p><p>于是乐视浏览器就通过修改 UA ，骗优酷自己是 iPhone ，以获取没有广告的优酷视频。</p><p class="img-center-box"><img class="lazyImg" _src="https://img.huxiucdn.com/article/content/202203/09/065922423254.png?imageView2/2/w/1000/format/png/interlace/1/q/85" data-w="764" data-h="810" src="https://img.huxiucdn.com/article/content/202203/09/065922423254.png?imageView2/2/w/1000/format/png/interlace/1/q/85" referrerpolicy="no-referrer"></p><p>除了离谱的 UA 之外，浏览器之间因为各自为营，还衍生了各种“兼容模式”“兼容插件”。</p><p>哎，为什么，直到现在浏览器才想起来要“统一标准”这件事儿呢？</p><p>差评君猜测主要是两方面：<br></p><p><strong>一方面是公开统一的标准推行起来很慢，毕竟涉及到的厂商很多，而厂商们为了迅速抢占市场，往往会想要“立刻”提升用户体验。</strong></p><p><strong>另一方面是，如果大家都统一，就失去了自己独特的优势，从产品沦为工具。</strong></p><p>而在现在浏览器主要功能都大差不差，趋向稳定，很难在技术上有跨时代的突破，再纠结于自家标准，意义已经不大了。更多的是给程序员，给用户带来的不便，还不如走向统一。</p><p>而曾经围绕 IE 浏览器的打响的，属于电脑屏幕中的两次“世界大战”，也以群雄割据，统一标准的局面走向了尾声。</p><p><span class="text-remarks" label="备注">部分图片、资料来源：</span></p><p><span class="text-remarks" label="备注">docstore.mik.ua/orelly/web/html/ch02_11.html</span></p><p><span class="text-remarks" label="备注">webaim.org/blog/user-agent-string-history</span></p><p><span class="text-remarks" label="备注">web.dev/compat2021/</span></p><p><span class="text-remarks" label="备注">copyfuture.com/blogs-details/2020081018354620389ly35dtlleop0u</span></p><p><span class="text-remarks" label="备注">www.ip138.com/useragent/</span></p><p><span class="text-remarks" label="备注">本文来自微信公众号：</span><a href="https://mp.weixin.qq.com/s/WdTRq31CRjy90KiN88dwtw" target="_blank" rel="nofollow" style="text-decoration: none;"><span class="text-remarks">差评（ID：chaping321）</span></a><span class="text-remarks">，作者：差评君</span></p>  
</div>
            